apiVersion: kiali.io/v1alpha1
kind: Kiali
metadata:
  name: kiali
  namespace: istio-system
spec:
  # Authentication - token based
  auth:
    strategy: token

  # Deployment configuration
  deployment:
    accessible_namespaces:
      - "**"
    replicas: 1
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi

  # External services - connect to our stack
  external_services:
    # Prometheus for metrics
    prometheus:
      url: "http://prometheus-server.observability.svc.cluster.local:80"

    # Grafana for dashboards
    grafana:
      enabled: true
      in_cluster_url: "http://grafana.observability.svc.cluster.local:3000"

    # Tracing - disabled since we removed Tempo
    tracing:
      enabled: false

  # Server configuration
  server:
    port: 20001
    web_root: "/kiali"
