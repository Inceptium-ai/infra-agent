# NodePort Services for ALB Target Groups
# These services expose observability tools via NodePort for ALB routing
# NIST SC-8: Transmission Confidentiality (via ALB HTTPS)
# NIST IA-2: Identification and Authentication (via Cognito)
#
# Deploy: kubectl apply -f infra/helm/values/alb-nodeport-services.yaml
---
apiVersion: v1
kind: Service
metadata:
  name: signoz-alb
  namespace: signoz
  labels:
    app: signoz
    access: alb
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: signoz
    app.kubernetes.io/instance: signoz
    app.kubernetes.io/component: signoz
  ports:
    - name: http
      port: 8080
      targetPort: 8080
      nodePort: 30301
      protocol: TCP
---
apiVersion: v1
kind: Service
metadata:
  name: headlamp-alb
  namespace: headlamp
  labels:
    app: headlamp
    access: alb
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: headlamp
  ports:
    - name: http
      port: 80
      targetPort: 4466
      nodePort: 30446
      protocol: TCP
# Note: Kubecost NodePort service is managed in infra/helm/values/kubecost/values.yaml
# via extraObjects (includes nginx proxy for URL rewriting)
